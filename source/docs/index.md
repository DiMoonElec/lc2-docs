---
hide:
  - navigation
  - toc
---

# Документация платформы <span style="display: inline-block; position: relative;">LC<span style="position: relative; top: -0.25em;">2</span></span>

<span style="display: inline-block; position: relative;">LC<span style="position: relative; top: -0.25em;">2</span></span> — платформа для программирования умных устройств, таких как IoT-устройства, промышленные контроллеры и встраиваемые системы. Она занимает промежуточное положение между сложными промышленными платформами программирования ПЛК (например, CoDeSys) и любительской платформой Arduino. <span style="display: inline-block; position: relative;">LC<span style="position: relative; top: -0.25em;">2</span></span> сочетает простоту и доступность Arduino с надёжностью и функциональностью, необходимыми для профессиональных встраиваемых систем. Платформа предоставляет язык программирования LC с си-подобным синтаксисом, адаптированный для задач управления аппаратным обеспечением. <span style="display: inline-block; position: relative;">LC<span style="position: relative; top: -0.25em;">2</span></span> упрощает создание эффективных и надёжных программ для устройств, обеспечивая высокую читаемость кода и производительность, подходящую как для хобби-проектов, так и для промышленных приложений.

**Ключевые компоненты платформы:**  
- **LCVM (Runtime)**: Виртуальная машина, работающая на микроконтроллере устройства, исполняет байт-код, сгенерированный компилятором LC.  
- **Компилятор LC**: Преобразует исходный код на языке LC в байт-код для LCVM.  
- **Вспомогательные инструменты**: Утилиты для загрузки байт-кода в память устройства, обновления Runtime и управления конфигурацией.  

**Цели платформы:**  
- Обеспечение простоты разработки программ для умных устройств: простые вещи должны реализовываться простыми методами.  
- Изоляция пользовательского скрипта от прошивки устройства: минимальный риск полного "зависания" устройства при некорректной работе пользовательского скрипта.  

## Пример программы на LC

Пример программы для контроллера, имеющего на борту несколько релейных выходов, дискретных входов, и часы реального времени RTC

```cs
bool Button1 @ "DI.1"; // Вход кнопки
bool Relay1 @ "DO.1"; // Выход реле 1
bool Relay2 @ "DO.2"; // Выход реле 2

//Привязка RTC к переменным проекта
byte Hours @ "RTC.HOUR";
byte Min @ "RTC.MIN";
byte Sec @ "RTC.SEC";

uint cntr = 0; //Счетчик циклов, для отладки

//Функция инициализации, вызывается один раз при запуске программы
void init()
{
  _CYCLE((ushort)100); // Вызов loop() каждые 100 мс
}

void loop() 
{
  if (Button1) 
    Relay1 = true; // Включить реле при нажатии кнопки
  else 
    Relay1 = false; // Выключить реле

  //Реле 2 включается в 12:00:00
  if(Hours == 12 && Min == 0 && Sec == 0)
    Relay2 = true;
  else
    Relay2 = false;

  cntr++;
}
```

## Как выглядит процесс программирования?

- **Написание кода** - разработчик пишет код на LC в текстовом редакторе, например, в VS Code  
- **Компиляция** - с помощью LCCompiler выполняется компиляция исходников (в VS Code это можно сделать комбинацией клавиш)  
- **Загрузка бинарника** - с помощью утилиты LC2 Monitor выполняется подключение к контроллеру через отладочный USB (или даже удаленно, через Ethernet или Wi-Fi, если контроллер это поддерживает), и загрузка скомпилированного проекта в контроллер  
- **Запуск и отладка** - с помощью LC2 Monitor выполняется запуск бинарника, при этом можно контролировать в реальном времени состояние переменных проекта (IO-переменных, и обычных), и длительность выполнения цикла loop()   

## Лицензирование

- **Компилятор LC**: Распространяется под лицензией GPL-3, что обеспечивает открытость исходного кода и возможность модификации сообществом.
- **Runtime (LCVM)**: Распространяется под лицензией BSD, что позволяет использовать Runtime в закрытых проектах без необходимости раскрытия исходного кода.
